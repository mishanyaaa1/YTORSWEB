# Инструкция по развертыванию сайта YTORSWEB

## Описание проекта
YTORSWEB - это веб-сайт для продажи техники с административной панелью, корзиной покупок и системой заказов.

## Структура проекта
- `client/` - React фронтенд приложение
- `server/` - Node.js бэкенд сервер
- `database/` - SQLite база данных

## Требования к хостингу
- Node.js 18+ 
- Поддержка SQLite или MySQL/PostgreSQL
- Минимум 512MB RAM
- Минимум 1GB дискового пространства

## Быстрое развертывание

### 1. Загрузка файлов
Загрузите все файлы из папки `хостинг` на ваш хостинг.

### 2. Установка зависимостей
```bash
npm install
cd server && npm install
```

### 3. Настройка базы данных
```bash
cd server
npm run migrate
npm run seed
```

### 4. Настройка переменных окружения
Создайте файл `.env` в папке `server`:
```env
PORT=3000
JWT_SECRET=ваш_секретный_ключ
NODE_ENV=production
```

### 5. Сборка фронтенда
```bash
npm run build
```

### 6. Запуск сервера
```bash
cd server
npm start
```

## Конфигурация для разных хостингов

### VPS/Дедикат
Используйте `ecosystem.config.js` для PM2:
```bash
npm install -g pm2
pm2 start ecosystem.config.js
```

### Shared хостинг
Используйте `start.js` для запуска через cron или панель управления.

### Docker
Используйте `Dockerfile` и `docker-compose.yml`:
```bash
docker-compose up -d
```

## Мониторинг и логи
- Логи приложения: `logs/app.log`
- Логи ошибок: `logs/error.log`
- Мониторинг через PM2: `pm2 monit`

## Безопасность
- Все API endpoints защищены rate limiting
- JWT токены для аутентификации
- Helmet для защиты заголовков
- CORS настроен для продакшена

## Настройка Telegram бота

### 1. Создание бота
1. Напишите @BotFather в Telegram
2. Создайте нового бота командой `/newbot`
3. Получите токен бота

### 2. Настройка бота
1. Добавьте бота в нужный чат/канал
2. Отправьте любое сообщение в чат
3. Chat ID определится автоматически

### 3. Настройка через админку
1. Войдите в админ панель сайта
2. Перейдите в раздел "Telegram бот"
3. Введите токен бота
4. Включите бота
5. Протестируйте настройки

### 4. Автоматическая настройка
```bash
npm run bot:setup
```

### 5. Полезные команды
```bash
# Протестировать бота
npm run bot:test

# Настроить базу данных
npm run bot:setup

# Диагностика Chat ID (если нужно)
npm run bot:chat-id
```

## Поддержка
При возникновении проблем проверьте:
1. Логи в папке `logs/`
2. Статус PM2: `pm2 status`
3. Доступность портов
4. Права доступа к файлам
5. Настройки Telegram бота в админке
